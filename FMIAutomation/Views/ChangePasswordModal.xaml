<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FMIAutomation.Views.ChangePasswordModal"
             Title="Alterar Senha"
             BackgroundColor="{DynamicResource BackgroundColor}">

    <Grid>
        <!-- Background overlay -->
        <BoxView BackgroundColor="Black" Opacity="0.5" />
        
        <!-- Modal content -->
        <Frame x:Name="MainContent" 
               BackgroundColor="{DynamicResource CardColor}"
               CornerRadius="20"
               Margin="10,100,10,0"
               VerticalOptions="FillAndExpand"
               HasShadow="True">
            
            <ScrollView>
                <StackLayout Spacing="25" Padding="20">
                    
                    <!-- Header -->
                    <Grid>
                        <Label Text="ðŸ”’ Alterar Senha" 
                               FontSize="28" 
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               TextColor="{DynamicResource TextColor}" />
                        
                        <Button Text="âœ•" 
                                x:Name="CloseButton"
                                FontSize="20"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource SecondaryTextColor}"
                                HorizontalOptions="End"
                                VerticalOptions="Start"
                                WidthRequest="40"
                                HeightRequest="40" />
                    </Grid>

                    <Label Text="Mantenha sua conta segura alterando sua senha regularmente" 
                           FontSize="14"
                           TextColor="{DynamicResource SecondaryTextColor}"
                           HorizontalTextAlignment="Center"
                           Margin="0,0,0,10" />

                    <!-- Campos de senha -->
                    <StackLayout Spacing="20">
                        
                        <!-- Senha atual -->
                        <Frame BackgroundColor="{DynamicResource CardColor}" 
                               CornerRadius="12" 
                               Padding="15"
                               HasShadow="False"
                               BorderColor="{DynamicResource BorderColor}">
                            <StackLayout Spacing="8">
                                <Label Text="ðŸ” Senha Atual" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="{DynamicResource TextColor}" />
                                <Grid>
                                    <Entry x:Name="CurrentPasswordEntry" 
                                           FontSize="16"
                                           IsPassword="True"
                                           TextColor="{DynamicResource TextColor}"
                                           PlaceholderColor="{DynamicResource SecondaryTextColor}"
                                           Placeholder="Digite sua senha atual"
                                           BackgroundColor="Transparent" />
                                    <Button Text="ðŸ‘ï¸" 
                                            x:Name="ToggleCurrentPasswordButton"
                                            FontSize="14"
                                            BackgroundColor="Transparent"
                                            TextColor="{DynamicResource SecondaryTextColor}"
                                            HorizontalOptions="End"
                                            VerticalOptions="Center"
                                            WidthRequest="30" />
                                </Grid>
                            </StackLayout>
                        </Frame>

                        <!-- Nova senha -->
                        <Frame BackgroundColor="{DynamicResource CardColor}" 
                               CornerRadius="12" 
                               Padding="15"
                               HasShadow="False"
                               BorderColor="{DynamicResource BorderColor}">
                            <StackLayout Spacing="8">
                                <Label Text="ðŸ†• Nova Senha" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="{DynamicResource TextColor}" />
                                <Grid>
                                    <Entry x:Name="NewPasswordEntry" 
                                           FontSize="16"
                                           IsPassword="True"
                                           TextColor="{DynamicResource TextColor}"
                                           PlaceholderColor="{DynamicResource SecondaryTextColor}"
                                           Placeholder="Digite a nova senha"
                                           BackgroundColor="Transparent" />
                                    <Button Text="ðŸ‘ï¸" 
                                            x:Name="ToggleNewPasswordButton"
                                            FontSize="14"
                                            BackgroundColor="Transparent"
                                            TextColor="{DynamicResource SecondaryTextColor}"
                                            HorizontalOptions="End"
                                            VerticalOptions="Center"
                                            WidthRequest="30" />
                                </Grid>
                                <Label x:Name="PasswordStrengthLabel"
                                       Text="MÃ­nimo 6 caracteres"
                                       FontSize="12"
                                       TextColor="{DynamicResource SecondaryTextColor}" />
                            </StackLayout>
                        </Frame>

                        <!-- Confirmar senha -->
                        <Frame BackgroundColor="{DynamicResource CardColor}" 
                               CornerRadius="12" 
                               Padding="15"
                               HasShadow="False"
                               BorderColor="{DynamicResource BorderColor}">
                            <StackLayout Spacing="8">
                                <Label Text="âœ… Confirmar Nova Senha" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="{DynamicResource TextColor}" />
                                <Grid>
                                    <Entry x:Name="ConfirmPasswordEntry" 
                                           FontSize="16"
                                           IsPassword="True"
                                           TextColor="{DynamicResource TextColor}"
                                           PlaceholderColor="{DynamicResource SecondaryTextColor}"
                                           Placeholder="Confirme a nova senha"
                                           BackgroundColor="Transparent" />
                                    <Button Text="ðŸ‘ï¸" 
                                            x:Name="ToggleConfirmPasswordButton"
                                            FontSize="14"
                                            BackgroundColor="Transparent"
                                            TextColor="{DynamicResource SecondaryTextColor}"
                                            HorizontalOptions="End"
                                            VerticalOptions="Center"
                                            WidthRequest="30" />
                                </Grid>
                                <Label x:Name="PasswordMatchLabel"
                                       Text=" "
                                       FontSize="12"
                                       TextColor="{DynamicResource DangerColor}" />
                            </StackLayout>
                        </Frame>

                    </StackLayout>

                    <!-- Dicas de seguranÃ§a -->
                    <Frame BackgroundColor="{DynamicResource LoginBackgroundColor}" 
                           CornerRadius="10" 
                           Padding="15"
                           HasShadow="False"
                           BorderColor="{DynamicResource AccentColor}"
                           Margin="0,10,0,0">
                        <StackLayout Spacing="8">
                            <Label Text="ðŸ’¡ Dicas para uma senha segura:" 
                                   FontSize="14" 
                                   FontAttributes="Bold"
                                   TextColor="{DynamicResource AccentColor}" />
                            <Label Text="â€¢ Use pelo menos 8 caracteres" 
                                   FontSize="12"
                                   TextColor="{DynamicResource SecondaryTextColor}" />
                            <Label Text="â€¢ Combine letras maiÃºsculas e minÃºsculas" 
                                   FontSize="12"
                                   TextColor="{DynamicResource SecondaryTextColor}" />
                            <Label Text="â€¢ Inclua nÃºmeros e sÃ­mbolos" 
                                   FontSize="12"
                                   TextColor="{DynamicResource SecondaryTextColor}" />
                            <Label Text="â€¢ Evite informaÃ§Ãµes pessoais" 
                                   FontSize="12"
                                   TextColor="{DynamicResource SecondaryTextColor}" />
                        </StackLayout>
                    </Frame>

                    <!-- BotÃµes de aÃ§Ã£o -->
                    <StackLayout Spacing="15" Margin="0,20,0,30">
                        
                        <Button x:Name="ChangePasswordButton"
                                Text="ðŸ”„ Alterar Senha" 
                                FontSize="16" 
                                FontAttributes="Bold"
                                BackgroundColor="{DynamicResource AccentColor}"
                                TextColor="White"
                                CornerRadius="12"
                                HeightRequest="50" />
                        
                        <Button x:Name="CancelButton"
                                Text="âŒ Cancelar" 
                                FontSize="16"
                                BackgroundColor="Transparent"
                                TextColor="{DynamicResource SecondaryTextColor}"
                                BorderColor="{DynamicResource SecondaryTextColor}"
                                BorderWidth="1"
                                CornerRadius="12"
                                HeightRequest="50" />
                        
                    </StackLayout>
                    
                </StackLayout>
            </ScrollView>
            
        </Frame>
    </Grid>

</ContentPage>